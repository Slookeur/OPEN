\section{The GNU Autotools files}

\subsection{The file: \bftt{configure.ac}}
\label{configall}

{\tiny{
\begin{script}
\confb{AC\_PREREQ}{\red{2.59}}

m4\_define(\bftt{major\_version}, \red{1})
m4\_define(\bftt{minor\_version}, \red{2})
m4\_define(\bftt{patch\_version}, \red{12})
m4\_define(\bftt{version}, \bftt{major\_version}\rtt{.}\bftt{minor\_version}\rtt{.}\bftt{patch\_version})
m4\_define(\bftt{bug\_email}, \red{\email})
m4\_define(\bftt{tar\_name}, \red{program})
m4\_define(\bftt{project\_url}, \red{https://www.program.com})

\confb{AC\_INIT}{\cstr{\bftt{prog}}, \cstr{\bftt{version}}, \cstr{\bftt{bug\_email}}, \cstr{\bftt{tar\_name}}, \cstr{\bftt{project\_url}}}
\confa{AM\_INIT\_AUTOMAKE}

\confb{AC\_DEFINE}{MAJOR\_VERSION, \bftt{major\_version}, \cstr{Program major version}}
\confb{AC\_SUBST}{MAJOR\_VERSION, \bftt{major\_version}}
\confb{AC\_DEFINE}{MINOR\_VERSION, \bftt{minor\_version}, \cstr{Program minor version}}
\confb{AC\_SUBST}{MINOR\_VERSION, \bftt{minor\_version}}
\confb{AC\_DEFINE}{PATCH\_VERSION, \bftt{patch\_version}, \cstr{Program patch version}}
\confb{AC\_SUBST}{PATCH\_VERSION, \bftt{patch\_version}}

\confb{AC\_CHECK\_PROG}{[\rtt{PKG\_CONFIG}], [pkg-config], [yes], [no])}
\confb{AC\_CHECK\_PROG}{[\rtt{UP\_MIME}], [update-mime-database], [yes], [no]}
\confb{AC\_CHECK\_PROG}{[\rtt{UP\_DESKTOP}], [update-desktop-database], [yes], [no]}
\confb{AC\_CHECK\_PROG}{[\rtt{UP\_APPSTREAM}], [appstream-util], [yes], [no]}   

\confb{AC\_DEFUN}{[AX\_CHECK\_COMPILER\_FLAGS],
\tabul [AC\_PREREQ(\red{2.59}) \dnl{for \_AC\_LANG\_PREFIX}
\tabul AC\_MSG\_CHECKING([whether \_AC\_LANG compiler accepts \$1])
\tabul \confb{AS\_LITERAL\_IF}{[\$1],
\tabul\tabul [AC\_CACHE\_VAL(AS\_TR\_SH(ax\_cv\_[]\_AC\_LANG\_ABBREV[]\_flags\_\$1), [
\tabul\tabul\tabul ax\_save\_FLAGS=\$[]\_AC\_LANG\_PREFIX[]FLAGS
\tabul\tabul\tabul \_AC\_LANG\_PREFIX[]FLAGS="\$1"
\tabul\tabul\tabul C\_COMPILE\_IFELSE([AC\_LANG\_PROGRAM()],
\tabul\tabul\tabul AS\_TR\_SH(ax\_cv\_[]\_AC\_LANG\_ABBREV[]\_flags\_\$1)=yes,
\tabul\tabul\tabul AS\_TR\_SH(ax\_cv\_[]\_AC\_LANG\_ABBREV[]\_flags\_\$1)=no)
\tabul\tabul \_AC\_LANG\_PREFIX[]FLAGS=\$ax\_save\_FLAGS])],
\tabul\tabul [ax\_save\_FLAGS=\${[]\_AC\_LANG\_PREFIX[]FLAGS}
\tabul\tabul \_AC\_LANG\_PREFIX[]FLAGS="\$1"
\tabul\tabul AC\_COMPILE\_IFELSE([AC\_LANG\_PROGRAM()],
\tabul\tabul\tabul eval AS\_TR\_SH(ax\_cv\_[]\_AC\_LANG\_ABBREV[]\_flags\_\$1)=yes,
\tabul\tabul\tabul eval AS\_TR\_SH(ax\_cv\_[]\_AC\_LANG\_ABBREV[]\_flags\_\$1)=no)
\tabul\tabul \_AC\_LANG\_PREFIX[]FLAGS=\$ax\_save\_FLAGS]}
\tabul eval ax\_check\_compiler\_flags=\${AS\_TR\_SH}(ax\_cv\_[]\_AC\_LANG\_ABBREV[]\_flags\_\$1)
\tabul AC\_MSG\_RESULT(\$ax\_check\_compiler\_flags)
\tabul if test "x\$ax\_check\_compiler\_flags" = xyes; then
\tabul\tabul m4\_default([\$2], :)
\tabul else
\tabul\tabul m4\_default([\$3], :)
\tabul fi
]}

\confa{AC\_PROG\_CC}
\confb{AX\_CHECK\_COMPILER\_FLAGS}{\cstr{\red{\${CFLAGS}}}}

\confa{AC\_FC\_WRAPPERS}
\confb{AC\_LANG\_PUSH}{\cstr{Fortran}}
\confb{AC\_PROG\_FC}{\cstr{xlf95 fort ifort ifc f95 g95 pgf95 lf95 xlf90 f90 pgf90 gfortran}, 
             \cstr{90}}
\confb{AC\_FC\_SRCEXT}{f90, FCFLAGS\_f90="\${FCFLAGS\_f90} \${FCFLAGS}",
                AC\_MSG\_ERROR(\cstr{Err. comp. .f90})}
\confb{AC\_FC\_SRCEXT}{F90, FCFLAGS\_F90="\${FCFLAGS\_F90} \${FCFLAGS}", 
                AC\_MSG\_ERROR(\cstr{Err. comp. .F90})}
\confb{AX\_CHECK\_COMPILER\_FLAGS}{\cstr{\red{\${FCFLAGS}}}}
\confa{AC\_FC\_LIBRARY\_LDFLAGS}
\confa{AC\_FC\_FREEFORM}
\confb{AC\_LANG\_POP}{\cstr{Fortran}}

\confb{PKG\_CHECK\_MODULES}{\rtt{GTK}, \cstr{\bftt{gtk+-3.0} >= 3.16}}
\confb{PKG\_CHECK\_MODULES}{\rtt{LIBXML2}, \cstr{\bftt{libxml-2.0} >= 2.4.0}}
\confb{PKG\_CHECK\_MODULES}{\rtt{FFMPEG}, \cstr{\bftt{libavcodec libavformat libavutil libswscale}}}
\confb{PKG\_CHECK\_MODULES}{\rtt{GLU}, \cstr{\bftt{glu}}}
\confb{PKG\_CHECK\_MODULES}{\rtt{EPOXY}, \cstr{\bftt{epoxy}}}

\confb{AC\_CONFIG\_FILES}{\cstr{
  \red{Makefile
  src/Makefile}
}}

\confa{AC\_OUTPUT}
\end{script}
}}
\vspace{-1.5cm}
\subsection{The file: \bftt{Makefile.am}}
\label{makeall}
{\tiny{
\begin{script}
\dgtt{prog\_datadir} = \var{\$(DESTDIR)\$(datadir)}
\dgtt{prog\_docdir} = \var{\$(DESTDIR)\$(docdir)}
\dgtt{prog\_mandir} = \var{\$(DESTDIR)\$(mandir)}
\dgtt{prog\_pkgdatadir} = \var{\$(DESTDIR)\$(pkgdatadir)}
\dgtt{prog\_desktopdir} = \var{\$(prog\_pkgdatadir)}/applications
\dgtt{prog\_metadir} = \var{\$(prog\_pkgdatadir)}/metainfo
\dgtt{SUBDIRS} = src
\dgtt{prog\_docdir} = \var{\$(docdir)}
\dgtt{prog\_doc\_DATA} = README.md AUTHORS ChangeLog
\dgtt{prog\_mandir} = \var{\$(mandir)}/man1/
\dgtt{prog\_man\_DATA} = program.1.gz
\rtt{install-data-local:}
\tabul if test -d \var{\$(srcdir)}/data; then \textbackslash
\tabul \tabul \var{\$(mkinstalldirs) \$(prog\_pkgdatadir)}/data; \textbackslash
\tabul \tabul for data in \var{\$(srcdir)}/data/*; do \textbackslash
\tabul \tabul \tabul if test -f \var{\$\$data}; then \textbackslash
\tabul \tabul \tabul \tabul \var{\$(INSTALL\_DATA) \${data} \$(prog\_pkgdatadir)}/data; \textbackslash
\tabul \tabul \tabul fi \textbackslash
\tabul \tabul done \textbackslash
\tabul fi
\tabul if test -d \var{\$(srcdir)}/pickups; then \textbackslash
\tabul \tabul \var{\$(mkinstalldirs) \$(prog\_pkgdatadir)}/pixmaps; \textbackslash
\tabul \tabul for pixmap in \var{\$(srcdir)}/pixmaps/*; do \textbackslash
\tabul \tabul \tabul if test -f \var{\$\${pixmap}}; then \textbackslash
\tabul \tabul \tabul \tabul \var{\$(INSTALL\_DATA) \$\${pixmap} \$(prog\_pkgdatadir)}/pixmaps; \textbackslash
\tabul \tabul \tabul else \textbackslash
\tabul \tabul \tabul \tabul \var{\$(mkinstalldirs) \$(prog\_pkgdatadir)/\$\${pixmap}}	; \textbackslash
\tabul \tabul \tabul \tabul for pixma in \var{\$\${pixmap}}/*; do \textbackslash
\tabul \tabul \tabul \tabul \tabul if test -f \var{\$\${pixma}}; then \textbackslash
\tabul \tabul \tabul \tabul \tabul \tabul \var{\$(INSTALL\_DATA) \$\${pixma} \$(prog\_pkgdatadir)/\$\${pixmap}}; \textbackslash
\tabul \tabul \tabul \tabul \tabul fi \textbackslash
\tabul \tabul \tabul \tabul done \textbackslash
\tabul \tabul \tabul fi \textbackslash
\tabul \tabul done \textbackslash
\tabul fi
\tabul if [ ! -d \var{\$(prog\_iconsdir)} ]; then \textbackslash
\tabul \tabul \var{\$(mkinstalldirs)} \var{\$(prog\_iconsdir)}; \textbackslash
\tabul fi
\tabul \var{\$(INSTALL\_DATA) \$(srcdir)}/metadata/icons/program.svg \var{\$(prog\_iconsdir)}
\tabul \var{\$(INSTALL\_DATA) \$(srcdir)}/metadata/icons/program-project.svg \var{\$(prog\_iconsdir)}
\tabul \var{\$(INSTALL\_DATA) \$(srcdir)}/metadata/icons/program-workspace.svg \var{\$(prog\_iconsdir)}
\tabul if [ ! -d \var{\$(prog\_mimedir)} ]; then \textbackslash
\tabul \tabul \var{\$(mkinstalldirs)} \var{\$(prog\_mimedir)}; \textbackslash
\tabul fi
\tabul \var{\$(INSTALL\_DATA) \$(srcdir)}/metadata/mime/program.xml \var{\$(prog\_mimedir)}
\tabul if [ ! -d \var{\$(prog\_metadir)} ]; then \textbackslash
\tabul \tabul mkdir -p \var{\$(prog\_metadir)}; \textbackslash
\tabul fi
\tabul \var{\$(INSTALL\_DATA) \$(srcdir)}/metadata/com.program.www.appdata.xml \var{\$(prog\_metadir)}
\tabul if [ ! -d \var{\$(prog\_desktopdir)} ]; then \textbackslash
\tabul \tabul mkdir -p \var{\$(prog\_desktopdir)}; \textbackslash
\tabul fi
\tabul appstream-util validate-relax --nonet \var{\$(prog\_metadir)}/com.program.www.appdata.xml
\tabul desktop-file-install --vendor="" \textbackslash
\tabul \tabul --dir=\var{\$(prog\_desktopdir)} -m 644 \textbackslash
\tabul \tabul \var{\$(prog\_desktopdir)}/program.desktop
\tabul touch --no-create \var{\$(prog\_iconsdir)}
\tabul if [ -u `which gtk-update-icon-cache` ]; then \textbackslash
\tabul \tabul gtk-update-icon-cache -q \var{\$(prog\_iconsdir)}; \textbackslash
\tabul fi
\tabul if [ -z "\var{\$(DESTDIR)}" ]; then \textbackslash
\tabul \tabul update-desktop-database \var{\$(prog\_desktopdir)} &> /dev/null || :; \textbackslash
\tabul \tabul update-mime-database \var{\$(prog\_datadir)}/mime &> /dev/null || :; \textbackslash
\tabul fi
\rtt{uninstall-local:}
\tabul -rm -rf \var{\$(prog\_pkgdatadir)}/data/*
\tabul -rmdir \var{\$(prog\_pkgdatadir)}/data
\tabul -rm -rf \var{\$(prog\_pkgdatadir)}/pixmaps/*
\tabul -rmdir \var{\$(prog\_pkgdatadir)}/pixmaps
\tabul -rm -rf \var{\$(prog\_pkgdatadir)}/pixmaps/*
\tabul -rmdir \var{\$(prog\_pkgdatadir)}
\tabul -rmdir \var{\$(prog\_docdir)}
\tabul -rm -rf \var{\$(prog\_iconsdir)}/program.svg
\tabul -rm -rf \var{\$(prog\_iconsdir)}/program-project.svg
\tabul -rm -rf \var{\$(prog\_iconsdir)}/program-workspace.svg
\tabul -rm -f \var{\$(prog\_desktopdir)}/program.desktop
\tabul -rm -f \var{\$(prog\_metadir)}/com.program.www.appdata.xml
\tabul touch --no-create \var{\$(prog\_iconsdir)}
\tabul if [ -u `which gtk-update-icon-cache` ]; then \textbackslash
\tabul \tabul gtk-update-icon-cache -q \var{\$(prog\_iconsdir)}; \textbackslash
\tabul fi
\tabul if [ -z "\var{\$(DESTDIR)}" ]; then \textbackslash
\tabul \tabul update-desktop-database \var{\$(prog\_desktopdir)} &> /dev/null || :; \textbackslash
\tabul \tabul update-mime-database \var{\$(prog\_datadir)}/mime &> /dev/null || :; \textbackslash
\tabul fi
\end{script}
}}

\subsection{The file: \bftt{src/Makefile.am}}
\label{makeall}

{\scriptsize{
\begin{script}
\bad{bin\_PROGRAMS} = prog

\dgtt{prog\_LDADD} = \var{\$(GTK\_LIBS) \$(LIBXML2\_LIBS) \$(PANGOFT2\_LIBS) \$(FFMPEG\_LIBS) \$(GLU\_LIBS) \$(EPOXY\_LIBS)}

\dgtt{LIB\_CFLAGS} = \var{\$(GTK\_CFLAGS) \$(LIBXML2\_CFLAGS) \$(PANGOFT2\_CFLAGS) \$(FFMPEG\_CFLAGS) \$(GLU\_CFLAGS) \$(EPOXY\_CFLAGS)}

\dgtt{OpenMP\_FLAGS} = -DOPENMP -fopenmp
\dgtt{AM\_LDFLAGS} = \var{\$(OpenMP\_FLAGS)}
\dgtt{AM\_CPPFLAGS} = \var{\$(OpenMP\_FLAGS)}
\dgtt{AM\_FFLAGS} = \var{\$(OpenMP\_FLAGS)}
\dgtt{AM\_CFLAGS} = -DGDK\_DISABLE\_DEPRECATED \var{\$(OpenMP\_CFLAGS) \$(LIB\_CFLAGS)}

\dgtt{prog\_fortran\_files} = file-1.f90 file-2.f90
\dgtt{prog\_fortran\_modules} = mod.f90

\dgtt{prog\_fortran} = \var{\$(prog\_fortran\_modules) \$(prog\_fortran\_files)}
\var{\$(patsubst \%.F90,\%.o,\$(prog\_fortran\_files)): \$(patsubst \%.F90,\%.o,\$(prog\_fortran\_modules))}

\dgtt{prog\_c} = main.c gui.c

\rtt{clean:}
\tabul -rm -f *.mod
\tabul -rm -f */*.o

\dgtt{prog\_SOURCES} = \var{\$(prog\_fortran)} \var{\$(prog\_c)}
\end{script}
}}

